<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
  layout:decorator="@{layout/loginJoinLayout.html}">
<th:block layout:fragment="customTitle">
	 <title>Welcome To TravleMaker</title>
</th:block>
<th:block layout:fragment="customCss">
  <style>
      html,body{
    	margin:0;
    	padding:0;
    }
 	label{
 		padding-right:10px;
 		padding-top:5px;
 	}
 	p{
 		display:none;
 		color:#ff0000;
 	}
   </style>
 </th:block>

<th:block layout:fragment="customContents">

<div class="register-box">
  <div class="register-logo">
    <a href="/"><b>Travel</b>Maker</a>
  </div>

  <div class="card">
    <div class="card-body register-card-body">
      <p class="login-box-msg">Welcome To TravelMaker!
      </p>
      <form action="/addMember" id="memberJoinForm" method="post">
        <div class="input-group form-group mb-3">
           <input type="text" id="memberId" class="form-control" placeholder="ID" name="mId">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-user"></span>
            </div>
          </div>
        </div>
        <p id="idCheckMsg">중복되는 아이디 입니다.</p>
        <p id="idRexExpMsg">아이디는 영문,숫자 포함 8자 이상 15자 이하로 작성하세요</p>
        <div class="input-group mb-3">
          <input type="password" class="form-control" placeholder="Password" name="mPw">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-lock"></span>
            </div>
          </div>
        </div>
        <div class="input-group mb-3">
          <input type="password" class="form-control mPwCheck" placeholder="Retype password" >
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-lock"></span>
            </div>
          </div>
        </div>
         <div class="input-group mb-3">
          <input type="text" class="form-control" placeholder="Full Name" name="mName">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-user"></span>
            </div>
          </div>
        </div>	
        <div class="input-group mb-3">
          <input type="email" class="form-control" placeholder="Email" name="mEmail">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-envelope"></span>
            </div>
          </div>
            <button type="button" class="btn btn-default">이멜인증</button>
        </div>
        <div class="input-group mb-3">
          <input type="text" class="form-control" placeholder="Phone Number" name="mTel">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fa fa-mobile"></span>
            </div>
          </div>
        </div>
          <div class="input-group mb-3">
          <input type="text" class="form-control" placeholder="Address" name="mAddr">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-home"></span>
            </div>
          </div>
        </div>
       <div class="input-group mb-3">
          <input type="text" class="form-control" placeholder="BirthDay" name="mBirth">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fa fa-calendar-o"></span>
            </div>
          </div>
        </div>
            <div class="input-group mb-3">
          <select class="form-control" name="mGender">
          	<option value='none'> 성별을 선택하세요 </option>
          	<option value='남'> 남자 </option>
          	<option value='여'> 여자 </option>
          </select>
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fa fa-smile-o"></span>
            </div>
          </div>
        </div>
         <div class="input-group mb-3">
          <input type="file"class="form-control" placeholder="Profile" name="mAvatar">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fa fa-camera"></span>
            </div>
          </div>
        </div>
        <div class="input-group mb-3">
          <input type="text"class="form-control" placeholder="Introduce your self" name ="mIntrod">      
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fa fa-child"></span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-8">
            <div class="icheck-primary">
              <input type="checkbox" id="agreeTerms" name="terms" value="agree">
              <label for="agreeTerms">
               I agree to the <a href="#">terms</a>
              </label>
            </div>
          </div>
          <!-- /.col -->
          <div class="col-4">
            <button type="button" class="btn btn-primary btn-block joinBtn">Register</button>
          </div>
          <!-- /.col -->
        </div>
      </form>
      <a href="/login" class="text-center">I already have a membership</a>
    </div>
    <!-- /.form-box -->
  </div><!-- /.card -->
</div>
</th:block>
 <th:block layout:fragment="customScript">
	<script>
		$(function(){
			var mId = $('input[name=mId]');
			var mPw = $('input[name=mPw]');
			var mPwCheck = $('.mPwCheck');
			var mName =$('input[name=mName]');
			var mEmail =$('input[name=mEmail]');
			var mTel =$('input[name=mTel]');
			var mAddr = $('input[name=mAddr]');
			var mBirth = $('input[name=mBirth]');
			var mGentder = $('input[name=mGender]');
			var mAvatar =$('input[name=mAvatar]');
			var mIntrod = $('input[name=mIntrod]');
			var idCheck = false; 
			var pwCheck = false;
			/*  아이디 정규식 및 중복여부 확인  ajax, 키보드를 누를때마다 중복검사 여부 확인하겠음.,,!!
			*/
			mId.keyup(function(){
				var mIdCheck = RegExp(/^[A-Za-z0-9_\-]{8,15}$/);
				if(mIdCheck.test(mId.val())==true){
					$('#idRexExpMsg').css('display','none');
					var request = $.ajax({
						  url: "/idCheck",  
						  method: "Post",
						  data: {mId :mId.val()}, 
						  dataType: "json"
					});
	    
					request.done(function( data ) {	
						if(data.result =='N'){ // 아이디 중복 안되는 경우
							idCheck = true;
							$('#idCheckMsg').css('display','none')
						} else {
							$('#idCheckMsg').css('display','block')
							idCheck = false;
						}
					});	
	   
					request.fail(function( jqXHR, textStatus ) {
						  alert( "Request failed: " + textStatus );
					});
					
				} else if(mIdCheck.test(mId.val())==false) {
					$('#idRexExpMsg').css('display','block');
				}
			})
			
			mPw.keyup(function(){
				var mPwCheck = RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{15,}$/);
				console.log()
				if(mPwCheck.test(mPw.val())==true){
					console.log('유효성검사!!')
				}
				
			})

	})
			

	</script>
</th:block>

</html>
